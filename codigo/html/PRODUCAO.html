<!DOCTYPE html>
<html lang="Pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="../assets/css/stylePRODUCAO.css">
  <link rel="shortcut icon" href="../assets/img/logo.png" type="image/x-icon">
  <title>Produção - DataStock</title>
</head>

<body>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
    }

    .chart {
      width: 800px;
      max-width: 100%;
      height: auto;
      margin: 20px auto;
      position: relative;
    }



    .line {
      fill: none;
      stroke: #007bff;
      stroke-width: 2;
    }

    .dot {
      fill: #007bff;
      stroke: #fff;
      stroke-width: 2;
    }

    .tooltip:hover {
      position: absolute;
      background: rgba(3, 3, 251, 0.7);
      color: #fff;
      padding: 5px;
      border-radius: 5px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s;
      margin: top auto;
    }

    .tooltip.active {
      padding: 10px;
      opacity: 2;
      background: rgba(3, 3, 251, 0.7);
      color: white;
      border-radius: 10px;

    }

    .opcao {
      display: inline-block;
      border-left: none;
      border-right: none;
      padding: 5px;
      border-style: solid;
      border-width: 0 0 5px 0;
      border-image: linear-gradient(to left, blue, #0d6dfdb7 50%) 10 10;
    }
  </style>
  <!-- cabeçalho -->
  <header>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="../html/telaempres.html">
          <img src="../assets/img/logo.png" alt="DataStock" width="70" height="50">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>

      <div class="collapse navbar-collapse m-2" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a class="nav-link active" aria-current="page" href="#">Inicio</a>
          <a class="nav-link" aria-current="page" href="#">Configuração</a>
        </div>
      </div>
    </nav>
  </header>
  <!-- Fim cabeçalho -->
  <main>
    <!-- Inicio logo cliente -->
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-12 d-flex justify-content-center mb-3 mt-3" id="logocliente">
          <!-- <div id="logocliente"
            style="width: 100px; height: 100px; background-color: black; background-image: url(https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQZcmPBsVjXbWFmp12w0eGNXpQP4gnFvClKkLhUMbqKig&s); background-position: center; background-repeat: no-repeat; background-size: cover;">
          </div> -->
        </div>
      </div>
    </div>
    <!-- Fim logo Cliente -->
    <!-- Inicio Opções -->
    <div class="container w-75">
      <hr>
      <h1 class="opcao">Opções</h1>
      <div class="row mt-4 mb-4 d-flex justify-content-center flex-wrap">
        <button type="button" id="btn_prod" class="btn btn-outline-primary col-lg-2 col-5 col-md-3 mb-2 ms-2"><img
            src="../assets/img/add.png" alt="" style="width:30px;"><strong>Iniciar Produção</strong></button>

        <button type="button" id="btn_edit" class="btn btn-outline-primary col-lg-2 col-5 col-md-3 mb-2 ms-2"><img
            src="../assets/img/edit.png" alt="" style="width:30px;"><strong>Editar Produção</strong></button>

        <button type="button" id="btn_novo" class="btn btn-outline-primary col-lg-2 col-5 col-md-3 mb-2 ms-2"><img
            src="../assets/img/rascunho.png" alt="" style="width:30px;"><strong>Novo Produto</strong></button>

        <button type="button" id="btn_ex" class="btn btn-outline-primary col-lg-2 col-5 col-md-2 mb-2 ms-2"><img
            src="../assets/img/x.png" alt="" style="width:30px;"><strong>Excluir</strong></button>
      </div>
      <div class="row">
        <div class="card border-primary p-2">

          <form id="prd1">
            <div class="m-2 lineinput">
              <label>Código</label>
              <input type="text" id="cod1" placeholder="Código do produto">
            </div>

            <div class="m-2 lineinput">
              <label>Descrição</label>
              <input type="text" id="descprod1" placeholder="Descrição do produto">
              <!--Será buscada automaticamente caso exista o Código cadastrado-->
            </div>

            <div class=" m-2 lineinput">
              <label>Lote</label>
              <input type="text" id="loteprod1" placeholder="Novo número de lote">
              <!--Será buscado automaticamente sendo o próximo na sequencia de lotes do determinado produto-->
            </div>

            <div class="m-2 lineinput">
              <label>Quantidade</label>
              <input type="text" id="qtdprod1" placeholder="Quantidade a ser produzida">
            </div>

            <div class="m-2 lineinput">
              <label>Validade</label>
              <input type="text" id="validprod1" placeholder="Validade para este lote">
            </div>

            <input class="p-2 mb-2 mt-2 ms-2 bg-primary routend text-white" type="submit" value="Salvar">
            <input class="p-2 mb-2 mt-2 bg-primary routend text-white" type="reset" value="Cancelar">

          </form>

        </div>

        <div class="card border-primary p-2">

          <form id="edit1">
            <div class="m-2 lineinput">
              <label>Código</label>
              <input type="text" id="cod1" placeholder="Código do produto que será editado">
              <input class="p-2 mb-2 mt-2 ms-2 bg-primary routend text-white" type="submit" value="Buscar">
            </div>

            <div class=" m-2 lineinput">
              <label>Lote</label>
              <input type="text" id="loteprod1" placeholder="Novo número de lote">
              <!--Será buscado automaticamente sendo o próximo na sequencia de lotes do determinado produto-->
            </div>

            <div class="m-2 lineinput">
              <label>Quantidade</label>
              <input type="text" id="qtdprod1" placeholder="Quantidade a ser produzida">
            </div>

            <div class="m-2 lineinput">
              <label>Validade</label>
              <input type="text" id="validprod1" placeholder="Validade para este lote">
            </div>

            <input class="p-2 mb-2 mt-2 ms-2 bg-primary routend text-white" type="submit" value="Salvar">
            <input class="p-2 mb-2 mt-2 bg-primary routend text-white" type="reset" value="Cancelar">

          </form>

        </div>

        <div class="card border-primary p-2">
          <form id="prd2">

            <div class="m-2 lineinput">
              <label>Novo código</label>
              <input type="text" id="cod2" placeholder="Código do produto">
            </div>

            <div class="m-2 lineinput">
              <label>Nova descrição</label>
              <input type="text" id="descprod2" placeholder="Descrição do produto">
            </div>

            <div class="m-2 lineinput">
              <label>Lote</label>
              <input type="text" id="loteprod2" placeholder="Novo número de lote">
              <!--Será buscado automaticamente sendo o próximo na sequencia de lotes do determinado produto,  neste caso, iniciará com 001-->
            </div>

            <div class="m-2 lineinput">
              <label>Matérias primas utilizadas</label>
              <input type="text" id="mp2" placeholder="Código das matérias primas utilizadas">
            </div>

            <div class="m-2 lineinput">
              <label>NCM (opcional)</label>
              <input type="text" id="ncm2" placeholder="NCM do produto (opcional)">
            </div>

            <div class="m-2 lineinput">
              <label>Unidade</label>
              <input type="text" id="un2" placeholder="Unidade do produto">
            </div>

            <p>Observação: Futuramente os campos acima serão substituídos pelos campos do módulo "cadastro de produtos",
              tendo em vista que o resultado será armazenado na mesma estrutura através do JSON</p>

            <input class="p-2 mb-2 mt-2 ms-2 bg-primary routend text-white" type="submit" value="Salvar">
            <input class="p-2 mb-2 mt-2 bg-primary routend text-white" type="reset" value="Cancelar">

          </form>

        </div>



        <div class="card border-primary p-2">
          <form id="prd3">

            <div class="m-2 lineinput">
              <label>Código</label>
              <input type="text" id="cod3" placeholder="Código do produto">
            </div>

            <div class="m-2 lineinput">
              <label>Lote</label>
              <input type="text" id="loteprod3" placeholder="Lote a ser excluído">
            </div>

            <input class="p-2 mb-2 mt-2 ms-2 bg-primary routend text-white" type="submit" value="Salvar">
            <input class="p-2 mb-2 mt-2 bg-primary routend text-white" type="reset" value="Cancelar">

          </form>

        </div>
      </div>
    </div>
    <!-- Fim Opções -->



    <!-- Inicio tabela -->

    <div class="container mt-3" id="PRODUCAO">

      <div class="card border-primary">
        <div class="card-body border-primary">
          <h5 class="opcao card-title"><img src="../assets/img/clock.png" alt=""
              style="width: 30px; margin-right: 10px;" id="PRODUC01">Lotes fabricados</h5>
          <div class="table-responsive">


            <form id="filtro1">
              <input type="checkbox" id="checkcod" name="codigo" value="checkcod" class="valores">
              <label for="checkcod"> Código</label><br>
              <input type="checkbox" id="checkdesc" name="descricao" value="checkdesc" class="valores">
              <label for="checkdesc"> Descrição</label><br>
              <input type="checkbox" id="checkvalid" name="validade" value="checkvalid" class="valores">
              <label for="checkvalid"> Validade Lote</label><br><br>
            </form>

            <div class="mb-3">
              <input type="text" id="searchInput" class="form-control" placeholder="Pesquisar...">
            </div>
            <form>
              <input id="filtro01" class="p-2 mb-2 mt-2 ms-2 bg-primary routend text-white" type="submit"
                value="Filtrar"><br><br>
            </form>



            <table id="showtable" class="table table-bordered border-primary">
              <thead>
                <tr>
                  <th class="bg-primary border-white text-white" scope="col">Código</th>
                  <th class="bg-primary border-white text-white" scope="col">Descrição</th>
                  <th class="bg-primary border-white text-white" scope="col">Lote</th>
                  <th class="bg-primary border-white text-white" scope="col">Qtd. Lote</th>
                  <th class="bg-primary border-white text-white" scope="col">Validade Lote</th>
                </tr>
              </thead>

              <tbody id="tabela-corpo">


              </tbody>
            </table>
            <span class="ms-2">*A ordenação da tabela é feita de acordo com o código do produto.</span>
            <!-- <nav aria-label="..." class="d-flex justify-content-center">
              <ul class="pagination pagination-lg ">
                <li class="page-item " id="btnGerarLinhas"><a class="page-link bg-primary text-white"
                    href="#PRODUCAO">Mais dados</a></li>
              </ul>
            </nav> -->
          </div>
        </div>
      </div>


    </div>

    <script>

      var mais = 0;


      function preencherTabela() {
        const tabelaCorpo = document.getElementById("tabela-corpo");
        const inputbusca = document.getElementById('searchInput');

        const checkcod = document.getElementById("checkcod").checked;
        const checkdesc = document.getElementById("checkdesc").checked;
        const checkvalid = document.getElementById("checkvalid").checked;
        let expressao = inputbusca.value.toLowerCase();

        tabelaCorpo.innerHTML = "";

        let tableprd = JSON.parse(localStorage.getItem("prod1")) || [];



        tableprd.sort((a, b) => a.cod1.localeCompare(b.cod1));

        tableprd.forEach((item) => {
          let addRow = false;

          if (checkcod && item.cod1.toLowerCase().includes(expressao)) {
            addRow = true;
          }
          if (checkdesc && item.descprod1.toLowerCase().includes(expressao)) {
            addRow = true;
          }
          if (checkvalid && item.validprod1.toLowerCase().includes(expressao)) {
            addRow = true;
          }

          if (addRow) {
            const newRow = tabelaCorpo.insertRow();
            newRow.innerHTML = `
          <td>${item.cod1}</td>
          <td>${item.descprod1}</td>
          <td>${item.loteprod1}</td>
          <td>${item.qtdprod1}</td>
          <td>${item.validprod1}</td>
        `;
          }
        });
      }

      function tabelacompleta() {
        const tabelaCorpo = document.getElementById("tabela-corpo");
        tabelaCorpo.innerHTML = "";

        let tableprd = JSON.parse(localStorage.getItem("prod1")) || [];
        tableprd.sort((a, b) => a.cod1.localeCompare(b.cod1));

        tableprd.forEach((item) => {
          const newRow = tabelaCorpo.insertRow();
          newRow.innerHTML = `
            <td>${item.cod1}</td>
            <td>${item.descprod1}</td>
            <td>${item.loteprod1}</td>
            <td>${item.qtdprod1}</td>
            <td>${item.validprod1}</td>
        `;
        });
      }



      function aplicarFiltros() {
        const inputbusca = document.getElementById('searchInput');
        const expressao = inputbusca.value.toLowerCase();

        const checkcod1 = document.getElementById("checkcod").checked;
        const checkdesc = document.getElementById("checkdesc").checked;
        const checkvalid = document.getElementById("checkvalid").checked;

        let tableprd = JSON.parse(localStorage.getItem("prod1")) || [];

        tableprd.sort((a, b) => a.cod1.localeCompare(b.cod1));

        const filteredTable = tableprd.filter((item) => {
          let addRow = false;
          if (checkcod1 && item.cod1.toLowerCase().includes(expressao)) {
            addRow = true;
          }
          if (checkdesc && item.descprod1.toLowerCase().includes(expressao)) {
            addRow = true;
          }
          if (checkvalid && item.validprod1.toLowerCase().includes(expressao)) {
            addRow = true;
          }
          return addRow;
        });

        if (expressao === "" && !checkcod1 && !checkdesc && !checkvalid) {
          tabelacompleta(tableprd);
        } else {
          preencherTabela(filteredTable);
        }
      }


      window.onload = function () {
        let tableprd = JSON.parse(localStorage.getItem("prod1")) || [];
        tableprd.sort((a, b) => a.cod1.localeCompare(b.cod1));
        tabelacompleta(tableprd);
      }

      const btnFiltrar = document.getElementById("filtro01");
      btnFiltrar.addEventListener("click", function (event) {
        event.preventDefault();
        aplicarFiltros();
      });

     /* const btnGerarLinhas = document.getElementById("btnGerarLinhas");
      btnGerarLinhas.addEventListener("click", function (event) {
        event.preventDefault();
        aplicarFiltros();
      }); */




    </script>



  </main>


  <script src="../assets/javascript/Json/PRODUCAO.js"></script>


</body>



</html>